<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
Hazard Tool
</title>
<style type="text/css">
* {
font-size:14px;
}

ul {
list-style-type:none;
}
ul,li {
margin:10px;
padding:0;
color: grey;
}
input[type=text] {
margin-bottom: 12px;
	border: none;
	border-bottom: 1px dashed grey;
	width: 100%;
	outline: none;
	padding: 0px 0px 0px 0px;
	font-size:16px;
	clear:both;
	display:inline-block;
}

</style>

<script type="text/javascript" src="js/hazardlist.js"></script>
<script type="text/javascript" src="js/checklist.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
<script type="text/javascript" src="js/sign.js"></script>

<style type="text/css">
#outter {
box-sizing: border-box;
border : 5px solid #f2f2f3
}
.sig {
box-sizing: border-box;
border : 5px solid white
display : inline;
padding-right : 5px;
padding-bottom : 5px;
}
</style>
</head>

<body onload="buildhl('hlistul',hazardlist);setuppad();">
  
  <div>
<h1>Hazard Tool</h1>

<ol>
<li>
Job Info
</li><li>
Permits
</li><li>
Safety Info
</li><li>
Hazard Checklist
</li><li>
Task, Hazard, Control, Ranking
</li><li>
Approvals 
</li><li>
Time Stamps
</li><li>
  Print
</li>

</ol>


<hr>
<h2>Job Info</h2>
<ul><li>
<label for="workername">
<span>Name</span><input type="text" name="workername"  />
</label>
</li><li>




<label for="date">
<span>Date</span>
<input type="text" id="datet"  />
<button onClick="setdate()" >now</button>
</label>
</li>


<script src="js/moment.js"></script>
<script type="text/javascript">


const setdate = function()  {

var datebox = document.getElementById("datet");
var m = moment().format('MMMM Do YYYY, h:mm a');
datebox.value = m;
}


</script>


<li>
<label for="supervisor">
<span>Supervisor </span>
<input type="text" name="supervisor"  />
</label>
</li><li>
<label for="jobnumber">
<span>Job #</span><input type="text" name="jobnumber"  />
</label>

</li><li>
<label for="client">
<span>Client</span><input type="text" name="client"  />
</label>

</li></ul>
<h2>Permits</h2>
<ul>

	<li>
	<label for="safeworkpermits">
	<span>Safe Work Permits</span>
	<input type="text" name="safeworkpermits"  />
	</label>
	</li>
	<li>
	<label for="grounddisturbance">
	<span>Ground Disturbance</span>
	<input type="text" name="grounddisturbance"  />
	</label>
	</li><li>
	<label for="confinedspace">
	<span>Confined Space</span>
	<input type="text" name="confinedspace"  />
	</label>
	</li>

</ul>
<h2>Safety Info </h2>
<ul>

<li>
<label for="location">
<span>Location</span>
<input type="text" id="location"  />
</label>

<script>

function showPosition(position) {
	var x = document.getElementById("location");
	x.value = position.coords.latitude + 
  	", " + position.coords.longitude;
}

function getLocation() {
  if (navigator.geolocation) { 
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.value = "Geolocation is not supported by this browser.";
  }
}

</script>

<button onclick="getLocation()">gps</button>

<script type="text/javascript">
function openmap() {

var x = document.getElementById("location");

if (!x.value.match(/\S/)) 
{
    alert("Field is blank");
    return false;
} 
else 
{
 window.open("https://maps.google.com/?q=" + x.value );
    return;

}
}

</script>


<button onclick="openmap()">map</button>
<!--
https://maps.google.com/?q=<lat>,<lng>

-->
</li>
<li>
<label for="firstaiders">
<span>First Aiders</span>
<input type="text" name="firstaiders"  />
</label>
</li><li>
<label for="muster">
<span>Muster</span>
<input type="text" name="muster"  />
</label>
</li><li>
<label for="weather">
<span></span>

<script type="text/javascript" src="js/weather.js"></script>
<button onclick="getWeather()">Weather</button>
<pre id="weatherresult"></pre>
<input type="text" name="weather"  />
</label>
</li>


<li>
<input type="checkbox" 
	name="fitforwork"
	id="fitforwork" />
<label for="fitforwork">
Fit for work
</label>
</li>

<li>
<input type="checkbox" 
	name="ppeinspected"
	id="ppeinspected" />
<label for="ppeinspected">
PPE Inspected
</label>
</li>

<li>
<input type="checkbox"
 name="fallprotection"
  id="fallprotection" />
	
<label for="fallprotection">
<span>Fall Protection Plan </span>
<input type="text" name="fallprotectiont"  />
</label>
</li><li>

<label for="erp">
<input type="checkbox"
 name="erp"
  id="erp" />
<span>ERP</span>
<input type="text" name="erpt"  />
</label>
</li>


</ul>

<h2>Hazard Checklist</h2>

<ul id="hlistul">

</ul>


<h2>Task Hazards</h2>
<h2>Approvals </h2>

<div id="outter" style="background:#f2f2f2; margin:5px" >
<div id="sigs"><img src="img/signhere.jpg" id="00" class="sig" height="40px" width="120px" /></div>
<div id="spad">
  <canvas id="signature-pad" class="signature-pad" 
  width="360px" height="120px"
  style="outline: #4CAF50 solid 1px;">
  </canvas>
<button id="clear">Clear</button>
<button id="setimg">Sign</button>
</div>
</div>

<a href="#print" onClick="window.print();">
<h2 id="print">Print </h2>
</a>
</div>
<!--
Area tidy
Barricades
Signage
Incidents
Near miss
Where you injured
Signout time
Signout
Submit to supervisor 

-->
<script type="text/javascript">


/*

var checkbox = document.getElementById("welder");
checkbox.addEventListener('change', (event) => {
  var welderhazard = document.getElementById("welderhazards");
  if (event.target.checked) {
    welderhazard.style.display = "block";
  } else {
    welderhazard.style.display = "none";
  }
});

*/



const buildtoggle = function(checkname)  {

var checkbox = document.getElementById(checkname);
var hazards = document.getElementById(checkname + "hazards");
if ( hazards == null ) {
alert(checkname)
}
 hazards.style.display = "none";
 
checkbox.addEventListener('change', (event) => {
  var hazards = document.getElementById(checkname + "hazards");
  if (event.target.checked) {
    hazards.style.display = "block";

  } else {
    hazards.style.display = "none";
   
  }
});

}



buildtoggle("welding");
buildtoggle("driving");
buildtoggle("general");
buildtoggle("fitting");
buildtoggle("labour");
buildtoggle("operating");

</script>
</body>
</html>